# Ìä∏Î¶¨Í±∞ API

> Ïã§ÏãúÍ∞Ñ ÏïåÎ¶º Ìä∏Î¶¨Í±∞ ÌèâÍ∞Ä Î∞è Í¥ÄÎ¶¨

## üìã Í∞úÏöî

UrbanPingÏùò ÌïµÏã¨ Í∏∞Îä•Ïù∏ Ìä∏Î¶¨Í±∞ ÏãúÏä§ÌÖúÏùÑ Í¥ÄÎ¶¨ÌïòÎäî APIÏûÖÎãàÎã§. ÏÇ¨Ïö©Ïûê ÏúÑÏπò, ÌôòÍ≤Ω Îç∞Ïù¥ÌÑ∞, ÏãúÏÑ§ ÏÉÅÌÉú Îì±ÏùÑ Í∏∞Î∞òÏúºÎ°ú Ïã§ÏãúÍ∞Ñ Ìä∏Î¶¨Í±∞ ÌèâÍ∞ÄÎ•º ÏàòÌñâÌï©ÎãàÎã§.

**Base URL**: `/api/triggers`

## üîê Ïù∏Ï¶ù ÏöîÍµ¨ÏÇ¨Ìï≠

Î™®Îì† Ìä∏Î¶¨Í±∞ APIÎäî JWT ÌÜ†ÌÅ∞ Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.

```http
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## üìö API ÏóîÎìúÌè¨Ïù∏Ìä∏

### 1. ÏúÑÏπò Í∏∞Î∞ò Ìä∏Î¶¨Í±∞ ÌèâÍ∞Ä

ÏÇ¨Ïö©ÏûêÏùò ÌòÑÏû¨ ÏúÑÏπòÎ•º Í∏∞Î∞òÏúºÎ°ú Î™®Îì† Ìä∏Î¶¨Í±∞ Ï°∞Í±¥ÏùÑ ÌèâÍ∞ÄÌïòÍ≥† ÏïåÎ¶ºÏùÑ Î∞úÏÜ°Ìï©ÎãàÎã§.

```http
POST /api/triggers/evaluate/location
Authorization: Bearer {token}
Content-Type: application/json

{
  "userId": "user@example.com",
  "latitude": 37.5665,
  "longitude": 126.9780,
  "radius": 2000,
  "triggerTypes": ["AIR_QUALITY", "BIKE_SHARING", "CULTURAL_EVENT"]
}
```

**ÏùëÎãµ**
```json
{
  "status": "success",
  "data": {
    "evaluatedCount": 5,
    "triggeredCount": 2,
    "location": {
      "latitude": 37.5665,
      "longitude": 126.9780,
      "address": "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÍµ¨ Î™ÖÎèô"
    },
    "evaluationTime": "2025-01-XX 10:00:00",
    "notifications": [
      {
        "id": 123,
        "type": "AIR_QUALITY",
        "title": "ÎåÄÍ∏∞Ïßà ÏïÖÌôî ÏïåÎ¶º",
        "message": "ÌòÑÏû¨ ÏßÄÏó≠ ÎØ∏ÏÑ∏Î®ºÏßÄ ÎÜçÎèÑÍ∞Ä ÎÜíÏäµÎãàÎã§.",
        "priority": "HIGH",
        "triggerCondition": {
          "threshold": 80,
          "operator": "GREATER_THAN",
          "currentValue": 85,
          "unit": "„éç/„é•"
        }
      },
      {
        "id": 124,
        "type": "BIKE_SHARING",
        "title": "Îî∞Î¶âÏù¥ Î∂ÄÏ°± ÏïåÎ¶º",
        "message": "Î™ÖÎèôÏó≠ Îî∞Î¶âÏù¥ ÎåÄÏó¨ÏÜåÏóê ÏûêÏ†ÑÍ±∞Í∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§.",
        "priority": "NORMAL",
        "triggerCondition": {
          "threshold": 3,
          "operator": "LESS_THAN",
          "currentValue": 1,
          "unit": "ÎåÄ"
        }
      }
    ],
    "evaluatedTriggers": [
      {
        "type": "AIR_QUALITY",
        "triggered": true,
        "condition": "PM2.5 > 80„éç/„é•",
        "currentValue": 85
      },
      {
        "type": "BIKE_SHARING",
        "triggered": true,
        "condition": "Available bikes < 3",
        "currentValue": 1
      },
      {
        "type": "CULTURAL_EVENT",
        "triggered": false,
        "condition": "Event within 500m",
        "currentValue": "No events found"
      }
    ]
  },
  "timestamp": "2025-01-XX 10:00:00"
}
```

### 2. ÏÇ¨Ïö©Ïûê Ìä∏Î¶¨Í±∞ ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ìöå

ÏÇ¨Ïö©ÏûêÏùò Ìä∏Î¶¨Í±∞ Î∞úÎèô ÌûàÏä§ÌÜ†Î¶¨Î•º Ï°∞ÌöåÌï©ÎãàÎã§.

```http
GET /api/triggers/history?page=0&size=20
Authorization: Bearer {token}
```

**ÏùëÎãµ**
```json
{
  "status": "success",
  "data": [
    {
      "evaluationId": "eval_123456",
      "evaluatedCount": 5,
      "triggeredCount": 2,
      "location": {
        "latitude": 37.5665,
        "longitude": 126.9780,
        "address": "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÍµ¨ Î™ÖÎèô"
      },
      "evaluationTime": "2025-01-XX 10:00:00",
      "notifications": [
        {
          "type": "AIR_QUALITY",
          "title": "ÎåÄÍ∏∞Ïßà ÏïÖÌôî ÏïåÎ¶º",
          "triggered": true
        }
      ]
    },
    {
      "evaluationId": "eval_123455",
      "evaluatedCount": 3,
      "triggeredCount": 0,
      "location": {
        "latitude": 37.5665,
        "longitude": 126.9780,
        "address": "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÍµ¨ Î™ÖÎèô"
      },
      "evaluationTime": "2025-01-XX 09:30:00",
      "notifications": []
    }
  ],
  "timestamp": "2025-01-XX 10:00:00"
}
```

### 3. Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï Ï°∞Ìöå

ÏÇ¨Ïö©ÏûêÏùò ÌòÑÏû¨ Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ïÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§.

```http
GET /api/triggers/settings?userId=1
Authorization: Bearer {token}
```

**ÏùëÎãµ**
```json
{
  "status": "success",
  "data": {
    "userId": 1,
    "activeTriggersCount": 8,
    "triggers": [
      {
        "id": 1,
        "type": "AIR_QUALITY",
        "name": "ÎåÄÍ∏∞Ïßà Î™®ÎãàÌÑ∞ÎßÅ",
        "description": "ÎØ∏ÏÑ∏Î®ºÏßÄ ÎÜçÎèÑÍ∞Ä ÎÜíÏùÑ Îïå ÏïåÎ¶º",
        "enabled": true,
        "condition": {
          "threshold": 80,
          "operator": "GREATER_THAN",
          "unit": "„éç/„é•"
        },
        "location": {
          "latitude": 37.5665,
          "longitude": 126.9780,
          "radius": 2000,
          "address": "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÍµ¨ Î™ÖÎèô"
        },
        "schedule": {
          "enabled": true,
          "startTime": "06:00",
          "endTime": "22:00",
          "days": ["MON", "TUE", "WED", "THU", "FRI"]
        }
      }
    ]
  },
  "timestamp": "2025-01-XX 10:00:00"
}
```

### 4. Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï ÏÉùÏÑ±

ÏÉàÎ°úÏö¥ Ìä∏Î¶¨Í±∞Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§.

```http
POST /api/triggers/settings
Authorization: Bearer {token}
Content-Type: application/json

{
  "userId": 1,
  "type": "AIR_QUALITY",
  "name": "ÎåÄÍ∏∞Ïßà Î™®ÎãàÌÑ∞ÎßÅ",
  "description": "ÎØ∏ÏÑ∏Î®ºÏßÄ ÎÜçÎèÑÍ∞Ä ÎÜíÏùÑ Îïå ÏïåÎ¶º",
  "condition": {
    "threshold": 80,
    "operator": "GREATER_THAN"
  },
  "location": {
    "latitude": 37.5665,
    "longitude": 126.9780,
    "radius": 2000,
    "address": "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÍµ¨ Î™ÖÎèô"
  },
  "schedule": {
    "enabled": true,
    "startTime": "06:00",
    "endTime": "22:00",
    "days": ["MON", "TUE", "WED", "THU", "FRI"]
  }
}
```

**ÏùëÎãµ**
```json
{
  "status": "success",
  "data": {
    "id": 1,
    "userId": 1,
    "type": "AIR_QUALITY",
    "name": "ÎåÄÍ∏∞Ïßà Î™®ÎãàÌÑ∞ÎßÅ",
    "enabled": true,
    "createdAt": "2025-01-XX 10:00:00"
  },
  "timestamp": "2025-01-XX 10:00:00"
}
```

### 5. Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï ÏàòÏ†ï

Í∏∞Ï°¥ Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ïÏùÑ ÏàòÏ†ïÌï©ÎãàÎã§.

```http
PUT /api/triggers/settings/{triggerId}
Authorization: Bearer {token}
Content-Type: application/json

{
  "name": "ÏàòÏ†ïÎêú ÎåÄÍ∏∞Ïßà Î™®ÎãàÌÑ∞ÎßÅ",
  "condition": {
    "threshold": 70,
    "operator": "GREATER_THAN"
  },
  "enabled": true
}
```

### 6. Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï ÏÇ≠Ï†ú

Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ïÏùÑ ÏÇ≠Ï†úÌï©ÎãàÎã§.

```http
DELETE /api/triggers/settings/{triggerId}
Authorization: Bearer {token}
```

## üéØ Ìä∏Î¶¨Í±∞ ÌÉÄÏûÖ

### ÌôòÍ≤Ω Î™®ÎãàÌÑ∞ÎßÅ
- `AIR_QUALITY`: ÎåÄÍ∏∞Ïßà Î™®ÎãàÌÑ∞ÎßÅ (PM2.5, PM10, O3 Îì±)
- `WEATHER_ALERT`: Í∏∞ÏÉÅ ÌäπÎ≥¥ (Ìè≠Ïóº, ÌïúÌåå, Í∞ïÌíç Îì±)
- `UV_INDEX`: ÏûêÏô∏ÏÑ† ÏßÄÏàò Î™®ÎãàÌÑ∞ÎßÅ
- `TEMPERATURE`: Ïò®ÎèÑ ÏûÑÍ≥ÑÍ∞í Î™®ÎãàÌÑ∞ÎßÅ

### ÍµêÌÜµ Î∞è Ïù¥Îèô
- `BIKE_SHARING`: Îî∞Î¶âÏù¥ ÎåÄÏó¨ÏÜå ÏÉÅÌÉú Î™®ÎãàÌÑ∞ÎßÅ
- `SUBWAY_DELAY`: ÏßÄÌïòÏ≤† ÏßÄÏó∞ Î™®ÎãàÌÑ∞ÎßÅ
- `TRAFFIC_CONGESTION`: ÍµêÌÜµ ÌòºÏû°ÎèÑ Î™®ÎãàÌÑ∞ÎßÅ
- `PARKING_AVAILABILITY`: Ï£ºÏ∞®Ïû• Í∞ÄÏö©ÏÑ± Î™®ÎãàÌÑ∞ÎßÅ

### Î¨∏Ìôî Î∞è Ïù¥Î≤§Ìä∏
- `CULTURAL_EVENT`: Î¨∏ÌôîÌñâÏÇ¨ ÏãúÏûë/Ï¢ÖÎ£å ÏïåÎ¶º
- `TICKET_AVAILABILITY`: Ìã∞Ïºì ÏòàÎß§ Í∞ÄÎä• ÏïåÎ¶º
- `EVENT_REMINDER`: ÌñâÏÇ¨ Ï∞∏Ïó¨ Î¶¨ÎßàÏù∏Îçî
- `EXHIBITION_NEW`: ÏÉàÎ°úÏö¥ Ï†ÑÏãú Ïò§Ìîà ÏïåÎ¶º

### Í≥µÍ≥µ ÏãúÏÑ§
- `FACILITY_STATUS`: ÏãúÏÑ§ Ïö¥ÏòÅ ÏÉÅÌÉú Î≥ÄÍ≤Ω
- `PROGRAM_REGISTRATION`: ÌîÑÎ°úÍ∑∏Îû® Ïã†Ï≤≠ Ïò§Ìîà
- `LIBRARY_BOOK`: ÎèÑÏÑú ÎåÄÏ∂ú Í∞ÄÎä• ÏïåÎ¶º
- `SPORTS_FACILITY`: Ï≤¥Ïú°ÏãúÏÑ§ ÏòàÏïΩ Í∞ÄÎä• ÏïåÎ¶º

### ÏúÑÏπò Í∏∞Î∞ò
- `GEOFENCE_ENTER`: ÌäπÏ†ï ÏßÄÏó≠ ÏßÑÏûÖ Ïãú
- `GEOFENCE_EXIT`: ÌäπÏ†ï ÏßÄÏó≠ Ïù¥ÌÉà Ïãú
- `NEARBY_POI`: Í¥ÄÏã¨ ÏßÄÏ†ê Í∑ºÏ≤ò ÎèÑÎã¨ Ïãú
- `LOCATION_REMINDER`: ÏúÑÏπò Í∏∞Î∞ò Î¶¨ÎßàÏù∏Îçî

## üìù ÏöîÏ≤≠/ÏùëÎãµ Ïä§ÌÇ§Îßà

### LocationTriggerRequest
```json
{
  "userId": "string",              // ÌïÑÏàò: ÏÇ¨Ïö©Ïûê ID
  "latitude": 37.5665,            // ÌïÑÏàò: ÏúÑÎèÑ
  "longitude": 126.9780,          // ÌïÑÏàò: Í≤ΩÎèÑ
  "radius": 2000,                 // ÏÑ†ÌÉù: Î∞òÍ≤Ω (ÎØ∏ÌÑ∞, Í∏∞Î≥∏Í∞í: 1000)
  "triggerTypes": ["AIR_QUALITY"] // ÏÑ†ÌÉù: ÌèâÍ∞ÄÌï† Ìä∏Î¶¨Í±∞ ÌÉÄÏûÖ (Ï†ÑÏ≤¥ ÌèâÍ∞Ä Ïãú null)
}
```

### TriggerCondition
```json
{
  "threshold": 80,                // ÏûÑÍ≥ÑÍ∞í
  "operator": "GREATER_THAN",     // ÎπÑÍµê Ïó∞ÏÇ∞Ïûê
  "unit": "„éç/„é•",                // Îã®ÏúÑ
  "currentValue": 85,             // ÌòÑÏû¨Í∞í (ÏùëÎãµ Ïãú)
  "dataSource": "seoul_api",      // Îç∞Ïù¥ÌÑ∞ ÏÜåÏä§
  "lastUpdated": "2025-01-XX"     // ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÍ∞Ñ
}
```

### TriggerSchedule
```json
{
  "enabled": true,                           // Ïä§ÏºÄÏ§Ñ ÏÇ¨Ïö© Ïó¨Î∂Ä
  "startTime": "06:00",                     // ÏãúÏûë ÏãúÍ∞Ñ
  "endTime": "22:00",                       // Ï¢ÖÎ£å ÏãúÍ∞Ñ
  "days": ["MON", "TUE", "WED"],            // ÏöîÏùº (MON~SUN)
  "timezone": "Asia/Seoul",                 // ÏãúÍ∞ÑÎåÄ
  "excludeHolidays": false                  // Í≥µÌú¥Ïùº Ï†úÏô∏ Ïó¨Î∂Ä
}
```

## ‚öôÔ∏è Ìä∏Î¶¨Í±∞ ÌèâÍ∞Ä ÏóîÏßÑ

### ÌèâÍ∞Ä Ïö∞ÏÑ†ÏàúÏúÑ
1. **Í∏¥Í∏â Ìä∏Î¶¨Í±∞**: Í∏∞ÏÉÅÌäπÎ≥¥, Ïû¨Ìï¥ Í≤ΩÎ≥¥
2. **ÎÜíÏùÄ Ïö∞ÏÑ†ÏàúÏúÑ**: ÎåÄÍ∏∞Ïßà, ÍµêÌÜµ ÏßÄÏó∞
3. **Î≥¥ÌÜµ Ïö∞ÏÑ†ÏàúÏúÑ**: Î¨∏ÌôîÌñâÏÇ¨, ÏãúÏÑ§ Ï†ïÎ≥¥
4. **ÎÇÆÏùÄ Ïö∞ÏÑ†ÏàúÏúÑ**: ÏùºÎ∞ò Ï†ïÎ≥¥, Î¶¨ÎßàÏù∏Îçî

### ÌèâÍ∞Ä Ï£ºÍ∏∞
- **Ïã§ÏãúÍ∞Ñ**: ÏÇ¨Ïö©Ïûê ÏúÑÏπò Î≥ÄÍ≤Ω Ïãú
- **Ï†ïÍ∏∞**: 5Î∂Ñ, 15Î∂Ñ, 30Î∂Ñ, 1ÏãúÍ∞Ñ Í∞ÑÍ≤©
- **Ïù¥Î≤§Ìä∏ Í∏∞Î∞ò**: Ïô∏Î∂Ä API Îç∞Ïù¥ÌÑ∞ Î≥ÄÍ≤Ω Ïãú
- **ÏàòÎèô**: ÏÇ¨Ïö©Ïûê ÏöîÏ≤≠ Ïãú

### Ï§ëÎ≥µ Î∞©ÏßÄ
- **Ïø®Îã§Ïö¥ ÏãúÍ∞Ñ**: ÎèôÏùº Ìä∏Î¶¨Í±∞ Ïû¨Î∞úÎèô Î∞©ÏßÄ (Í∏∞Î≥∏ 30Î∂Ñ)
- **ÏúÑÏπò Í∏∞Î∞ò Ï§ëÎ≥µ**: Î∞òÍ≤Ω ÎÇ¥ ÎèôÏùº Ìä∏Î¶¨Í±∞ ÌÜµÌï©
- **ÏãúÍ∞Ñ Í∏∞Î∞ò Ï§ëÎ≥µ**: ÏßßÏùÄ ÏãúÍ∞Ñ ÎÇ¥ ÎèôÏùº ÏïåÎ¶º Î∞©ÏßÄ

## üîß Í≥†Í∏â Í∏∞Îä•

### 1. Ï°∞Í±¥Î∂Ä Ìä∏Î¶¨Í±∞

Î≥µÌï© Ï°∞Í±¥ÏùÑ Í∞ÄÏßÑ Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï:

```json
{
  "type": "COMPLEX_CONDITION",
  "conditions": [
    {
      "type": "AIR_QUALITY",
      "threshold": 80,
      "operator": "GREATER_THAN"
    },
    {
      "type": "WEATHER",
      "condition": "RAIN",
      "operator": "EQUAL"
    }
  ],
  "logic": "AND"  // AND, OR, NOT
}
```

### 2. ÏãúÍ∞Ñ Í∏∞Î∞ò Ìä∏Î¶¨Í±∞

ÌäπÏ†ï ÏãúÍ∞ÑÏóê Î∞úÎèôÌïòÎäî Ìä∏Î¶¨Í±∞:

```json
{
  "type": "TIME_BASED",
  "schedule": {
    "type": "CRON",
    "expression": "0 8 * * MON-FRI",
    "action": "CHECK_AIR_QUALITY"
  }
}
```

### 3. Ïó∞ÏáÑ Ìä∏Î¶¨Í±∞

ÌïòÎÇòÏùò Ìä∏Î¶¨Í±∞Í∞Ä Îã§Î•∏ Ìä∏Î¶¨Í±∞Î•º Î∞úÎèô:

```json
{
  "type": "CHAIN_TRIGGER",
  "primaryTrigger": "AIR_QUALITY_HIGH",
  "chainedTriggers": [
    {
      "type": "INDOOR_ACTIVITY_SUGGEST",
      "delay": 300  // 5Î∂Ñ ÌõÑ Î∞úÎèô
    }
  ]
}
```

## ‚ùå ÏóêÎü¨ ÏΩîÎìú

| ÏΩîÎìú | Î©îÏãúÏßÄ | ÏÑ§Î™Ö |
|------|--------|------|
| TRIGGER_001 | Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÏúÑÏπò Ï†ïÎ≥¥ | ÏûòÎ™ªÎêú ÏúÑÎèÑ/Í≤ΩÎèÑ Í∞í |
| TRIGGER_002 | ÏßÄÏõêÌïòÏßÄ ÏïäÎäî Ìä∏Î¶¨Í±∞ ÌÉÄÏûÖ | Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî Ìä∏Î¶¨Í±∞ ÌÉÄÏûÖ |
| TRIGGER_003 | Ìä∏Î¶¨Í±∞ ÌèâÍ∞Ä Ïã§Ìå® | Ïô∏Î∂Ä API Ïò§Î•òÎ°ú Ïù∏Ìïú ÌèâÍ∞Ä Ïã§Ìå® |
| TRIGGER_004 | Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï Ïò§Î•ò | ÏûòÎ™ªÎêú Ï°∞Í±¥ ÎòêÎäî Ïä§ÏºÄÏ§Ñ ÏÑ§Ï†ï |
| TRIGGER_005 | Ìä∏Î¶¨Í±∞ Í∞úÏàò Ï¥àÍ≥º | ÏÇ¨Ïö©ÏûêÎãπ ÏµúÎåÄ Ìä∏Î¶¨Í±∞ Í∞úÏàò Ï¥àÍ≥º |
| TRIGGER_006 | Í∂åÌïú ÏóÜÏùå | Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏùò Ìä∏Î¶¨Í±∞ Ï†ëÍ∑º ÏãúÎèÑ |

## üìã ÏÇ¨Ïö© ÏòàÏãú

### 1. ÏúÑÏπò Í∏∞Î∞ò Ïã§ÏãúÍ∞Ñ Ìä∏Î¶¨Í±∞ ÌèâÍ∞Ä

```javascript
const evaluateLocationTriggers = async (userId, location) => {
  const response = await fetch('/api/triggers/evaluate/location', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${accessToken}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      userId,
      latitude: location.latitude,
      longitude: location.longitude,
      radius: 2000,
      triggerTypes: ['AIR_QUALITY', 'BIKE_SHARING', 'CULTURAL_EVENT']
    })
  });
  
  const result = await response.json();
  
  // Î∞úÎèôÎêú ÏïåÎ¶º Ï≤òÎ¶¨
  if (result.data.triggeredCount > 0) {
    result.data.notifications.forEach(notification => {
      showNotification(notification);
    });
  }
  
  return result;
};

// ÏúÑÏπò Î≥ÄÍ≤Ω Ïãú ÏûêÎèô ÌèâÍ∞Ä
navigator.geolocation.watchPosition(async (position) => {
  const location = {
    latitude: position.coords.latitude,
    longitude: position.coords.longitude
  };
  
  await evaluateLocationTriggers(userId, location);
});
```

### 2. Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï Í¥ÄÎ¶¨

```javascript
// Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï ÏÉùÏÑ±
const createTrigger = async (triggerConfig) => {
  const response = await fetch('/api/triggers/settings', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${accessToken}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(triggerConfig)
  });
  return response.json();
};

// ÎåÄÍ∏∞Ïßà Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï ÏòàÏãú
const airQualityTrigger = {
  userId: 1,
  type: 'AIR_QUALITY',
  name: 'Ï∂úÍ∑ºÍ∏∏ ÎåÄÍ∏∞Ïßà Ï≤¥ÌÅ¨',
  description: 'Ï∂úÍ∑º ÏãúÍ∞ÑÏóê ÎåÄÍ∏∞ÏßàÏù¥ ÎÇòÏÅòÎ©¥ ÏïåÎ¶º',
  condition: {
    threshold: 80,
    operator: 'GREATER_THAN'
  },
  location: {
    latitude: 37.5665,
    longitude: 126.9780,
    radius: 1000,
    address: 'ÌöåÏÇ¨ Í∑ºÏ≤ò'
  },
  schedule: {
    enabled: true,
    startTime: '07:00',
    endTime: '09:00',
    days: ['MON', 'TUE', 'WED', 'THU', 'FRI']
  }
};

await createTrigger(airQualityTrigger);
```

### 3. Ïã§ÏãúÍ∞Ñ Ìä∏Î¶¨Í±∞ Î™®ÎãàÌÑ∞ÎßÅ

```javascript
// React Hook ÏòàÏãú
const useTriggerMonitoring = (userId) => {
  const [triggerHistory, setTriggerHistory] = useState([]);
  const [activeTriggers, setActiveTriggers] = useState([]);

  // Ìä∏Î¶¨Í±∞ ÌûàÏä§ÌÜ†Î¶¨ Ï°∞Ìöå
  const fetchTriggerHistory = async () => {
    const response = await fetch('/api/triggers/history?page=0&size=10', {
      headers: { 'Authorization': `Bearer ${accessToken}` }
    });
    const data = await response.json();
    setTriggerHistory(data.data);
  };

  // ÌôúÏÑ± Ìä∏Î¶¨Í±∞ Ï°∞Ìöå
  const fetchActiveTriggers = async () => {
    const response = await fetch(`/api/triggers/settings?userId=${userId}`, {
      headers: { 'Authorization': `Bearer ${accessToken}` }
    });
    const data = await response.json();
    setActiveTriggers(data.data.triggers);
  };

  // Ìä∏Î¶¨Í±∞ ÌÜ†Í∏Ä
  const toggleTrigger = async (triggerId, enabled) => {
    await fetch(`/api/triggers/settings/${triggerId}`, {
      method: 'PUT',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ enabled })
    });
    
    setActiveTriggers(prev => 
      prev.map(trigger => 
        trigger.id === triggerId 
          ? { ...trigger, enabled }
          : trigger
      )
    );
  };

  useEffect(() => {
    fetchTriggerHistory();
    fetchActiveTriggers();
  }, [userId]);

  return {
    triggerHistory,
    activeTriggers,
    toggleTrigger,
    refetch: () => {
      fetchTriggerHistory();
      fetchActiveTriggers();
    }
  };
};
```

### 4. ÏßÄÏò§ÌéúÏä§ Ìä∏Î¶¨Í±∞ ÏÑ§Ï†ï

```javascript
const setupGeofenceTrigger = async (userId, location, action) => {
  const geofenceTrigger = {
    userId,
    type: 'GEOFENCE_ENTER',
    name: `${location.name} ÎèÑÏ∞© ÏïåÎ¶º`,
    description: `${location.name}Ïóê ÎèÑÏ∞©ÌïòÎ©¥ Ï£ºÎ≥Ä Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï©ÎãàÎã§.`,
    condition: {
      action: action, // 'CHECK_AIR_QUALITY', 'FIND_PARKING', etc.
    },
    location: {
      latitude: location.latitude,
      longitude: location.longitude,
      radius: location.radius || 100,
      address: location.address
    },
    schedule: {
      enabled: true,
      startTime: '00:00',
      endTime: '23:59',
      days: ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN']
    }
  };

  return await createTrigger(geofenceTrigger);
};

// ÏÇ¨Ïö© ÏòàÏãú: ÌöåÏÇ¨ ÎèÑÏ∞© Ïãú Ï£ºÎ≥Ä Ï†êÏã¨ ÎßõÏßë Ï∂îÏ≤ú
await setupGeofenceTrigger(userId, {
  name: 'ÌöåÏÇ¨',
  latitude: 37.5665,
  longitude: 126.9780,
  radius: 200,
  address: 'ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï§ëÍµ¨ Î™ÖÎèô'
}, 'RECOMMEND_RESTAURANTS');
```

---

**ÏóÖÎç∞Ïù¥Ìä∏**: 2025-01-XX  
**Î≤ÑÏ†Ñ**: v1.0.0
